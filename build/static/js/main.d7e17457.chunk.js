(this["webpackJsonpamazon-app"]=this["webpackJsonpamazon-app"]||[]).push([[0],{37:function(e,t,n){},38:function(e,t,n){},39:function(e,t,n){},41:function(e,t,n){},42:function(e,t,n){},43:function(e,t,n){},44:function(e,t,n){},45:function(e,t,n){},47:function(e,t,n){},50:function(e,t,n){"use strict";n.r(t);var c=n(4),r=n(28),s=n.n(r),i=(n(37),n(9)),a=(n(38),n(39),n(18)),o=n(8),j=n(3),l=function(){var e=Object(o.g)(),t=Object(c.useContext)(R),n=Object(i.a)(t,2),r=n[0],s=n[1];return Object(j.jsx)("header",{children:Object(j.jsxs)("nav",{children:[Object(j.jsx)("li",{children:Object(j.jsx)(a.b,{className:"active",to:"/shop",children:"Shop"})}),Object(j.jsx)("li",{children:Object(j.jsx)(a.b,{to:"/review",children:"Review"})}),Object(j.jsx)("li",{children:Object(j.jsx)(a.b,{to:"/inventory",children:"Inventory"})}),r.isSignedIn?Object(j.jsx)("li",{children:Object(j.jsx)("span",{onClick:function(){s({}),e("/")},children:"LogOut"})}):Object(j.jsx)("li",{children:Object(j.jsx)("span",{onClick:function(){e("/login")},children:"Sign In"})}),r.isSignedIn&&Object(j.jsx)("li",{children:Object(j.jsx)("img",{style:{height:"30px",objectFit:"cover",borderRadius:"50%"},src:r.photo,alt:""})})]})})},u=n(10),d=(n(41),n(42),function(e){var t=e.shop,n=e.addToCartHandle,c=e.showbtn;return Object(j.jsxs)("div",{className:"row mt-3 mx-3 shopcontainer  text-xs-center ",children:[Object(j.jsx)("div",{className:"col-md-3 col-xs-12 text-xs-center col-sm-12 text-sm-center m-auto",children:Object(j.jsx)("img",{className:"img-fluid  ",src:t.img,alt:t.name})}),Object(j.jsx)("div",{className:"col-md-9 ",children:Object(j.jsxs)("div",{className:"mx-3 shopitemdetails ",children:[Object(j.jsx)("p",{children:Object(j.jsx)(a.b,{to:"/product/"+t.key,children:t.name})}),Object(j.jsxs)("p",{children:[" ",Object(j.jsxs)("b",{children:["$",t.price]})]}),Object(j.jsx)("p",{children:Object(j.jsxs)("small",{children:["Shipping price:",t.shipping]})}),Object(j.jsxs)("p",{children:["Rating: ",t.star]}),c?Object(j.jsx)("button",{onClick:function(){return n(t)},className:"main-button",children:"Add to Cart"}):""]})})]})}),b=(n(43),function(e){for(var t=e.cart,n=e.children,c=0,r=0;r<t.length;r++){var s=t[r];c=c+s.price*s.quantity||1}var i=12.99;i=c>350?0:c>150?6:c>0?12.99:0;var a=(c/10).toFixed(2),o=(Number(c)+i+Number(a)).toFixed(2);return Object(j.jsxs)("div",{children:[Object(j.jsx)("h4",{children:"Order Summary"}),Object(j.jsxs)("p",{children:["Item Ordered:",t.length]}),Object(j.jsxs)("p",{children:["product price: $",function(e){var t=e.toFixed(2);return Number(t)}(c)]}),Object(j.jsxs)("p",{children:["Shipping cost: $",i]}),Object(j.jsxs)("p",{children:["Tax cost: $",a]}),Object(j.jsxs)("p",{children:["Total price:$",Number(o)]}),Object(j.jsx)("br",{}),n]})}),h=function(){var e=function(){var e=sessionStorage.getItem("userId");if(e)return e;var t="user-"+(new Date).getTime();return sessionStorage.setItem("userId",t),t}();return"emaJohn/carts/".concat(e)},O=function(){var e=h(),t=localStorage.getItem(e)||"{}";return JSON.parse(t)},m=function(){var e=Object(c.useState)([]),t=Object(i.a)(e,2),n=t[0],r=t[1],s=Object(c.useState)([]),o=Object(i.a)(s,2),l=o[0],m=o[1];Object(c.useEffect)((function(){fetch("https://secure-ocean-84970.herokuapp.com/products").then((function(e){return e.json()})).then((function(e){return r(e)}))}),[]),Object(c.useEffect)((function(){var e=O(),t=Object.keys(e);fetch("https://secure-ocean-84970.herokuapp.com/productsbykeys",{method:"POST",headers:{"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(e){return m(e)}))}),[n]);var p=function(e){var t,n=e.key,c=l.find((function(e){return e.key===n})),r=1;if(c){r=c.quantity+1,c.quantity=r;var s=l.filter((function(e){return e.key!==n}));t=[].concat(Object(u.a)(s),[c])}else e.quantity=1,t=[].concat(Object(u.a)(l),[e]);m(t),function(e,t){var n=O();n[e]=t,localStorage.setItem(h(),JSON.stringify(n))}(e.key,r)};return Object(j.jsxs)("div",{className:"row ",children:[Object(j.jsx)("div",{className:"col-md-9 shop-container ",children:n.map((function(e){return Object(j.jsx)(d,{showbtn:!0,addToCartHandle:p,shop:e},e.key)}))}),Object(j.jsx)("div",{className:"col-md-3",children:l.length>0?Object(j.jsx)(b,{cart:l,children:Object(j.jsx)(a.b,{to:"/review",children:Object(j.jsx)("button",{className:"main-button",children:"Review Button"})})}):Object(j.jsx)("div",{children:"Cart is Empty"})})]})},p=(n(44),function(e){var t=e.product,n=e.handleRemove;return Object(j.jsxs)("div",{className:"review-container row  mt-3 ",children:[Object(j.jsx)("div",{className:"col-md-3 text-center",children:Object(j.jsx)("img",{className:"review-img",src:t.img,alt:""})}),Object(j.jsx)("div",{className:"col-md-9",children:Object(j.jsxs)("div",{className:" reviewcontent review",children:[Object(j.jsx)("h5",{children:t.name}),Object(j.jsx)("p",{children:t.quantity}),Object(j.jsx)("p",{children:t.price}),Object(j.jsx)("button",{onClick:function(){return n(t)},className:"main-button",children:"Remove"})]})})]})}),x=(n(45),n.p+"static/media/giphy.46a86830.gif"),f=function(){var e,t=Object(c.useState)([]),n=Object(i.a)(t,2),r=n[0],s=n[1],a=Object(c.useState)(!1),l=Object(i.a)(a,1)[0],u=Object(o.g)();Object(c.useEffect)((function(){var e=O(),t=Object.keys(e);fetch("https://secure-ocean-84970.herokuapp.com/productsbykeys",{method:"POST",headers:{"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(e){return s(e)}))}),[]),l&&(e=Object(j.jsx)("img",{src:x,alt:""}));var d=function(){u("/shipment")},m=function(e){s(r.filter((function(t){return t.key!==e.key}))),function(e){var t=O();delete t[e],localStorage.setItem(h(),JSON.stringify(t))}(e.key)};return Object(j.jsx)("div",{className:"container-fluid",children:Object(j.jsxs)("div",{className:"row",children:[Object(j.jsxs)("div",{style:{borderRight:"2px solid lightgray"},className:"col-md-9 p-3 ",children:[r.map((function(e){return Object(j.jsx)(p,{handleRemove:m,product:e},e.key)})),e]}),Object(j.jsx)("div",{className:"col-md-3",children:Object(j.jsx)(b,{handleplaceorder:d,cart:r,children:Object(j.jsx)("button",{onClick:d,className:"main-button",children:"proceed checkout"})})})]})})},v=function(){return Object(j.jsx)("div",{children:"Error 404!..... Page not found"})},g=function(){var e=Object(o.h)().productkey,t=Object(c.useState)({}),n=Object(i.a)(t,2),r=n[0],s=n[1];return Object(c.useEffect)((function(){fetch("https://secure-ocean-84970.herokuapp.com/product/"+e).then((function(e){return e.json()})).then((function(e){return s(e)}))}),[e]),Object(j.jsx)("div",{children:Object(j.jsx)("div",{className:"row",children:Object(j.jsx)("div",{className:"col-md-9",children:Object(j.jsx)(d,{showbtn:!1,shop:r})})})})},y=n(20),N=n(29),S=(n(47),function(){var e=Object(N.a)(),t=e.register,n=e.handleSubmit,r=e.formState.errors,s=Object(c.useContext)(R),a=Object(i.a)(s,1)[0];return Object(j.jsxs)("form",{className:"ship-form",onSubmit:n((function(e){var t=O(),n=Object(y.a)(Object(y.a)({},a),{},{products:t,shipment:e,orderTime:new Date});fetch("https://secure-ocean-84970.herokuapp.com/addOrder",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then((function(e){return e.json()})).then((function(e){e&&(localStorage.removeItem(h()),alert("Your order placed successfully"))}))})),children:[Object(j.jsx)("input",Object(y.a)({defaultValue:a.name,name:"name"},t("name",{required:!0})))," ",r.name&&Object(j.jsx)("span",{className:"error",children:"Name field is required"}),Object(j.jsx)("input",Object(y.a)({defaultValue:a.email,name:"email"},t("email",{required:!0})))," ",r.email&&Object(j.jsx)("span",{className:"error",children:"Email field is required"}),Object(j.jsx)("input",Object(y.a)({placeholder:"Enter your address...",name:"address"},t("address",{required:!0})))," ",r.address&&Object(j.jsx)("span",{className:"error",children:"Address field is required"}),Object(j.jsx)("input",Object(y.a)({placeholder:"Enter your phone....",name:"phone"},t("phone",{required:!0})))," ",r.phone&&Object(j.jsx)("span",{className:"error",children:"Phone field is required"}),Object(j.jsx)("input",{type:"submit"})]})}),k=n(30),w=n(17),I={apiKey:"AIzaSyBbAu5hFVnkCUkxV1RofuyZ_B3ytL9PDe8",authDomain:"ema-john-simple-241ff.firebaseapp.com",projectId:"ema-john-simple-241ff",storageBucket:"ema-john-simple-241ff.appspot.com",messagingSenderId:"3589626281",appId:"1:3589626281:web:7d2d36214b12d47d3d0cb8"},C=function(e){var t=Object(w.c)();Object(w.g)(t.currentUser,{displayName:e}).then((function(){console.log("user name update succesfully")})).catch((function(e){}))};var T=function(){var e=Object(c.useState)(!1),t=Object(i.a)(e,2),n=t[0],r=t[1],s=Object(c.useState)({isSignedIn:!1,name:"",email:"",password:"",photo:""}),a=Object(i.a)(s,2),l=a[0],u=a[1],d=Object(o.g)(),b=(Object(o.f)().state||{from:{pathname:"/"}}).from;k.a(I);var h=Object(c.useContext)(R),O=Object(i.a)(h,2),m=O[0],p=O[1],x=function(e){var t=!0;if("email"===e.target.name&&(t=/\S+@\S+\.\S+/.test(e.target.value)),"password"===e.target.name){var n=e.target.value.length>6,c=/\d{1}/.test(e.target.value);t=n&&c}if(t){var r=Object(y.a)({},l);r[e.target.name]=e.target.value,u(r)}};return Object(j.jsx)("div",{className:"App",style:{display:"flex",alignItems:"center",justifyContent:"center",height:"90vh"},children:Object(j.jsxs)("div",{style:{height:"500px",width:"400px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",border:"1px solid  black"},children:[Object(j.jsxs)("form",{className:"form w-100",onSubmit:function(e){n&&l.email&&l.password&&function(e,t,n){var c=Object(w.c)();return Object(w.b)(c,t,n).then((function(t){var n=t.user;return n.error="",n.success=!0,C(e),n})).catch((function(e){var t={};return t.error=e.message,t.success=!1,t}))}(l.name,l.email,l.password).then((function(e){u(e),p(e),d(b)})),!n&&l.email&&l.password&&function(e,t){var n=Object(w.c)();return Object(w.d)(n,e,t).then((function(e){var t=e.user;return t.success=!0,t})).catch((function(e){return{success:!1}}))}(l.email,l.password).then((function(e){u(e),p(e),d(b)})),e.preventDefault()},children:[n&&Object(j.jsx)("input",{className:"form-control w-75 m-auto",onBlur:x,type:"text",name:"name",placeholder:"enter your name"}),Object(j.jsx)("br",{}),Object(j.jsx)("input",{className:"form-control w-75 m-auto",onBlur:x,type:"email",name:"email",placeholder:"enter your email"}),Object(j.jsx)("br",{}),Object(j.jsx)("input",{className:"form-control w-75 m-auto",onBlur:x,type:"password",name:"password",placeholder:"enter your password"}),Object(j.jsx)("br",{}),Object(j.jsx)("input",{className:"btn btn-primary",type:"submit",value:"Sign In"})]}),Object(j.jsxs)("p",{className:"mt-3",children:["Create a account?",Object(j.jsx)("span",{style:{color:"green",cursor:"pointer",marginLeft:"10px",fontWeight:"bold",fontSize:"14px"},onClick:function(){return r(!n)},children:"Sign up"})]}),l.isSignedIn?Object(j.jsx)("button",{onClick:function(){(function(){var e=Object(w.c)();return Object(w.f)(e).then((function(e){return{isSignedIn:!1,name:"",photo:"",email:"",success:!1}})).catch((function(e){}))})().then((function(e){u(e),p(e)}))},children:"Log out"}):Object(j.jsx)("button",{className:"btn btn-secondary mt-5",onClick:function(){(function(){var e=new w.a,t=Object(w.c)();return Object(w.e)(t,e).then((function(e){var t=e.user,n=t.displayName,c=t.photoURL;return{isSignedIn:!0,name:n,email:t.email,photo:c,success:!0}})).catch((function(e){console.log(e)}))})().then((function(e){p(e),u(e),d(b)}))},children:"sing in with google"}),m.isLoggedIn&&Object(j.jsx)("p",{children:"Loggin successfully"})]})})},q=n(32),J=["children"],E=function(e){var t=e.children,n=(Object(q.a)(e,J),Object(o.f)()),r=Object(c.useContext)(R);return Object(i.a)(r,1)[0].email?t:Object(j.jsx)(o.a,{to:"/login",state:{from:n}})},P=function(){return Object(j.jsx)("div",{children:Object(j.jsxs)("form",{action:"",children:[Object(j.jsxs)("p",{children:[Object(j.jsx)("span",{children:"Name"}),Object(j.jsx)("input",{type:"text"})]}),Object(j.jsxs)("p",{children:[Object(j.jsx)("span",{children:"price:"}),Object(j.jsx)("input",{type:"text"})]}),Object(j.jsxs)("p",{children:[Object(j.jsx)("span",{children:"Quantity"}),Object(j.jsx)("input",{type:"text"})]}),Object(j.jsxs)("p",{children:[Object(j.jsx)("span",{children:"Product Image"}),Object(j.jsx)("input",{type:"file"})]}),Object(j.jsx)("button",{onClick:function(){fetch("https://secure-ocean-84970.herokuapp.com/addProduct",{method:"POST",headers:{"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify({})})},children:"Add product"})]})})},R=Object(c.createContext)();var B=function(){var e=Object(c.useState)(function(){var e=localStorage.getItem("logininfo");return e?JSON.parse(e):[]}()),t=Object(i.a)(e,2),n=t[0],r=t[1];return Object(c.useEffect)((function(){localStorage.setItem("logininfo",JSON.stringify(n))})),Object(j.jsx)(R.Provider,{value:[n,r],children:Object(j.jsx)("div",{className:"container-fluid",children:Object(j.jsxs)(a.a,{children:[Object(j.jsx)(l,{}),Object(j.jsxs)(o.d,{children:[Object(j.jsx)(o.b,{exact:!0,path:"/shop",element:Object(j.jsx)(m,{})}),Object(j.jsx)(o.b,{exact:!0,path:"/",element:Object(j.jsx)(m,{})}),Object(j.jsx)(o.b,{path:"/shipment",element:Object(j.jsx)(E,{children:Object(j.jsx)(S,{})})}),Object(j.jsx)(o.b,{path:"/review",element:Object(j.jsx)(f,{})}),Object(j.jsx)(o.b,{path:"/inventory",element:Object(j.jsx)(E,{children:Object(j.jsx)(P,{})})}),Object(j.jsx)(o.b,{path:"/login",element:Object(j.jsx)(T,{})}),Object(j.jsx)(o.b,{path:"/product/:productkey",element:Object(j.jsx)(g,{})}),Object(j.jsx)(o.b,{path:"*",element:Object(j.jsx)(v,{})})]})]})})})};n(49);s.a.render(Object(j.jsx)(B,{}),document.getElementById("root"))}},[[50,1,2]]]);
//# sourceMappingURL=main.d7e17457.chunk.js.map